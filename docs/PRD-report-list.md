# PRD: ë¦¬í¬íŠ¸ ëª©ë¡ ê¸°ëŠ¥

## ê°œìš”

### ëª©ì 
í´ë¼ì´ì–¸íŠ¸ì™€ ê´€ë¦¬ìê°€ ì£¼ê°„/ì›”ê°„ ë¦¬í¬íŠ¸ì— ì‰½ê²Œ ì ‘ê·¼í•  ìˆ˜ ìˆëŠ” ëª©ë¡ ê¸°ëŠ¥ ì œê³µ

### ë°°ê²½
- í˜„ì¬ ë¦¬í¬íŠ¸ í˜ì´ì§€(`/report/monthly/[id]`)ëŠ” êµ¬í˜„ë˜ì–´ ìˆìœ¼ë‚˜ ì ‘ê·¼ ê²½ë¡œê°€ ì—†ìŒ
- ê´€ë¦¬ìì™€ í´ë¼ì´ì–¸íŠ¸ ëª¨ë‘ ë¦¬í¬íŠ¸ ëª©ë¡ì„ í™•ì¸í•  ë°©ë²•ì´ í•„ìš”

---

## ì‚¬ìš©ì ì‹œë‚˜ë¦¬ì˜¤

### 1. í´ë¼ì´ì–¸íŠ¸ ì‹œë‚˜ë¦¬ì˜¤
```
1. í´ë¼ì´ì–¸íŠ¸ê°€ ëŒ€ì‹œë³´ë“œ ì ‘ì† (ì˜ˆ: ?client=hea-pangyo)
2. ìƒë‹¨ íƒ­ì—ì„œ "ë¦¬í¬íŠ¸" íƒ­ í´ë¦­
3. ë³¸ì¸ì˜ ì£¼ê°„/ì›”ê°„ ë¦¬í¬íŠ¸ ëª©ë¡ í™•ì¸
4. ì›í•˜ëŠ” ë¦¬í¬íŠ¸ í´ë¦­ â†’ ìƒì„¸ ë¦¬í¬íŠ¸ í˜ì´ì§€ë¡œ ì´ë™
```

### 2. ê´€ë¦¬ì ì‹œë‚˜ë¦¬ì˜¤
```
1. ê´€ë¦¬ìê°€ ëŒ€ì‹œë³´ë“œ ë¡œê·¸ì¸
2. í´ë¼ì´ì–¸íŠ¸ ì„ íƒ
3. "ë¦¬í¬íŠ¸" íƒ­ í´ë¦­
4. í•´ë‹¹ í´ë¼ì´ì–¸íŠ¸ì˜ ë¦¬í¬íŠ¸ ëª©ë¡ í™•ì¸
5. ë¦¬í¬íŠ¸ í´ë¦­ â†’ ìƒì„¸ í˜ì´ì§€ ì´ë™ (ê´€ë¦¬ìëŠ” draft ìƒíƒœë„ ë³¼ ìˆ˜ ìˆìŒ)
```

---

## ê¸°ëŠ¥ ìš”êµ¬ì‚¬í•­

### 1. UI ë³€ê²½

#### 1.1 ëŒ€ì‹œë³´ë“œ íƒ­ ì¶”ê°€
- ê¸°ì¡´ íƒ­: `í†µí•© ìš”ì•½` | `Meta ìƒì„¸` | `ë„¤ì´ë²„ ìƒì„¸`
- ë³€ê²½ í›„: `í†µí•© ìš”ì•½` | `Meta ìƒì„¸` | `ë„¤ì´ë²„ ìƒì„¸` | `ë¦¬í¬íŠ¸`

#### 1.2 ë¦¬í¬íŠ¸ ëª©ë¡ UI
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ë¦¬í¬íŠ¸ ëª©ë¡                              [í•„í„° â–¼]  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ“Š 2024ë…„ 11ì›” ë¦¬í¬íŠ¸                              â”‚
â”‚     ì›”ê°„ | 2024-11-01 ~ 2024-11-30 | ë°œí–‰ë¨        â”‚
â”‚     â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ [ë³´ê¸°] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ“Š 2024ë…„ 45ì£¼ì°¨ ë¦¬í¬íŠ¸                            â”‚
â”‚     ì£¼ê°„ | 2024-11-04 ~ 2024-11-10 | ë°œí–‰ë¨        â”‚
â”‚     â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ [ë³´ê¸°] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ“Š 2024ë…„ 10ì›” ë¦¬í¬íŠ¸                              â”‚
â”‚     ì›”ê°„ | 2024-10-01 ~ 2024-10-31 | ë°œí–‰ë¨        â”‚
â”‚     â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ [ë³´ê¸°] â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 1.3 í•„í„° ì˜µì…˜
- ì „ì²´ | ì›”ê°„ | ì£¼ê°„
- ê¸°ë³¸ê°’: ì „ì²´

### 2. API ìš”êµ¬ì‚¬í•­

#### 2.1 í´ë¼ì´ì–¸íŠ¸ìš© ë¦¬í¬íŠ¸ ëª©ë¡ API
```
GET /api/reports?clientSlug={slug}&type={monthly|weekly|all}
```

**Response:**
```json
{
  "success": true,
  "client": {
    "slug": "hea-pangyo",
    "name": "H.E.A íŒêµ"
  },
  "reports": [
    {
      "id": "uuid-xxx",
      "report_type": "monthly",
      "period_start": "2024-11-01",
      "period_end": "2024-11-30",
      "year": 2024,
      "month": 11,
      "status": "published",
      "published_at": "2024-12-01T00:00:00Z",
      "label": "2024ë…„ 11ì›” ë¦¬í¬íŠ¸",
      "url": "/report/monthly/uuid-xxx"
    }
  ],
  "total": 5
}
```

### 3. ì ‘ê·¼ ê¶Œí•œ

| ë¦¬í¬íŠ¸ ìƒíƒœ | í´ë¼ì´ì–¸íŠ¸ | ê´€ë¦¬ì |
|-------------|-----------|--------|
| draft       | âŒ        | âœ…     |
| published   | âœ…        | âœ…     |
| archived    | âŒ        | âœ…     |

---

## ê¸°ìˆ  ëª…ì„¸

### 1. íŒŒì¼ êµ¬ì¡°
```
dashboard/src/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â””â”€â”€ reports/
â”‚   â”‚       â””â”€â”€ route.ts          # í´ë¼ì´ì–¸íŠ¸ìš© ë¦¬í¬íŠ¸ ëª©ë¡ API (ì‹ ê·œ)
â”‚   â””â”€â”€ page.tsx                  # ëŒ€ì‹œë³´ë“œ (íƒ­ ì¶”ê°€)
â””â”€â”€ components/
    â””â”€â”€ report/
        â””â”€â”€ ReportList.tsx        # ë¦¬í¬íŠ¸ ëª©ë¡ ì»´í¬ë„ŒíŠ¸ (ì‹ ê·œ)
```

### 2. ì»´í¬ë„ŒíŠ¸ ì„¤ê³„

#### ReportList.tsx
```tsx
interface ReportListProps {
  clientSlug: string
  isAdmin?: boolean
}

interface Report {
  id: string
  report_type: 'monthly' | 'weekly'
  period_start: string
  period_end: string
  year: number
  month?: number
  week?: number
  status: 'draft' | 'published' | 'archived'
  published_at?: string
  label: string
  url: string
}
```

### 3. ë°ì´í„°ë² ì´ìŠ¤

#### í•„ìš” í…Œì´ë¸”
- `polarad_reports` (ë§ˆì´ê·¸ë ˆì´ì…˜ 002_reports_schema.sql)
- `polarad_report_comments`

#### ì¸ë±ìŠ¤ (ì´ë¯¸ ì •ì˜ë¨)
- `idx_reports_client_id`
- `idx_reports_type`
- `idx_reports_status`

---

## êµ¬í˜„ ê³„íš

### Phase 1: ê¸°ë°˜ ì‘ì—…
1. âœ… í´ë¼ì´ì–¸íŠ¸ìš© ë¦¬í¬íŠ¸ ëª©ë¡ API ìƒì„± (`/api/reports`)
2. â¬œ DB í…Œì´ë¸” ìƒì„± (Supabase ë§ˆì´ê·¸ë ˆì´ì…˜)

### Phase 2: UI êµ¬í˜„
3. â¬œ ReportList ì»´í¬ë„ŒíŠ¸ ìƒì„±
4. â¬œ ëŒ€ì‹œë³´ë“œì— "ë¦¬í¬íŠ¸" íƒ­ ì¶”ê°€
5. â¬œ íƒ­ ì „í™˜ ì‹œ ë¦¬í¬íŠ¸ ëª©ë¡ í‘œì‹œ

### Phase 3: í…ŒìŠ¤íŠ¸
6. â¬œ í…ŒìŠ¤íŠ¸ ë¦¬í¬íŠ¸ ë°ì´í„° ìƒì„±
7. â¬œ í´ë¼ì´ì–¸íŠ¸/ê´€ë¦¬ì ì ‘ê·¼ í…ŒìŠ¤íŠ¸
8. â¬œ ë°°í¬

---

## ì˜ˆìƒ ì†Œìš” ì‹œê°„
- Phase 1: 10ë¶„
- Phase 2: 30ë¶„
- Phase 3: 15ë¶„
- **ì´: ì•½ 1ì‹œê°„**

---

## ì°¸ê³ 

### ê´€ë ¨ íŒŒì¼
- `/report/monthly/[id]/page.tsx` - ì›”ê°„ ë¦¬í¬íŠ¸ ìƒì„¸ í˜ì´ì§€ (êµ¬í˜„ë¨)
- `/api/reports/monthly/[id]/route.ts` - ì›”ê°„ ë¦¬í¬íŠ¸ ë°ì´í„° API (êµ¬í˜„ë¨)
- `/api/admin/reports/route.ts` - ê´€ë¦¬ììš© ë¦¬í¬íŠ¸ CRUD API (êµ¬í˜„ë¨)

### ê¸°ì¡´ íƒ­ êµ¬ì¡° (page.tsx)
```tsx
<button onClick={() => setActiveTab('summary')}>í†µí•© ìš”ì•½</button>
<button onClick={() => setActiveTab('meta')}>Meta ìƒì„¸</button>
<button onClick={() => setActiveTab('naver')}>ë„¤ì´ë²„ ìƒì„¸</button>
// ì¶”ê°€ ì˜ˆì •:
<button onClick={() => setActiveTab('reports')}>ë¦¬í¬íŠ¸</button>
```
